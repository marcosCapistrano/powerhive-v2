<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Logs - Power Balancer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <nav>
        <div class="nav-brand">Power Balancer</div>
        <div class="nav-links">
            <a href="/">Dashboard</a>
            <a href="/models">Models</a>
            <a href="/logs" class="active">Logs</a>
        </div>
    </nav>

    <main>
        <h1>Change Logs</h1>
        <p>Recent preset changes made by the power balancer.</p>

        <table class="logs-table">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Miner IP</th>
                    <th>Model</th>
                    <th>From</th>
                    <th>To</th>
                    <th>Delta</th>
                    <th>Reason</th>
                    <th>Margin</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {{range .Logs}}
                <tr class="{{if .Success}}success{{else}}error{{end}}">
                    <td>{{.IssuedAt.Format "2006-01-02 15:04:05"}}</td>
                    <td>{{.MinerIP}}</td>
                    <td>{{.ModelName}}</td>
                    <td>{{.FromPreset}}</td>
                    <td>{{.ToPreset}}</td>
                    <td>{{.ExpectedDeltaW}}W</td>
                    <td><span class="reason-badge reason-{{.Reason}}">{{.Reason}}</span></td>
                    <td>{{printf "%.1f" .MarginAtTime}}%</td>
                    <td>
                        {{if .Success}}
                        <span class="badge badge-success">OK</span>
                        {{else}}
                        <span class="badge badge-error" title="{{.ErrorMessage}}">FAIL</span>
                        {{end}}
                    </td>
                </tr>
                {{else}}
                <tr>
                    <td colspan="9">No changes logged yet.</td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </main>
</body>
</html>
