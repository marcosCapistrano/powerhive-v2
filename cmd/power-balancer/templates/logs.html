<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Alterações - Power Balancer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <nav>
        <div class="nav-brand">Power Balancer</div>
        <div class="nav-links">
            <a href="/">Painel</a>
            <a href="/models">Modelos</a>
            <a href="/logs" class="active">Registros</a>
        </div>
    </nav>

    <main>
        <h1>Registro de Alterações</h1>
        <p>Alterações recentes de preset realizadas pelo power balancer.</p>

        <table class="logs-table">
            <thead>
                <tr>
                    <th>Hora</th>
                    <th>IP do Minerador</th>
                    <th>Modelo</th>
                    <th>De</th>
                    <th>Para</th>
                    <th>Delta</th>
                    <th>Motivo</th>
                    <th>Margem</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {{range .Logs}}
                <tr class="{{if .Success}}success{{else}}error{{end}}">
                    <td>{{.IssuedAt.Format "02/01/2006 15:04:05"}}</td>
                    <td>{{.MinerIP}}</td>
                    <td>{{.ModelName}}</td>
                    <td>{{.FromPreset}}</td>
                    <td>{{.ToPreset}}</td>
                    <td>{{.ExpectedDeltaW}}W</td>
                    <td><span class="reason-badge reason-{{.Reason}}">{{.Reason}}</span></td>
                    <td>{{printf "%.1f" .MarginAtTime}}%</td>
                    <td>
                        {{if .Success}}
                        <span class="badge badge-success">OK</span>
                        {{else}}
                        <span class="badge badge-error" title="{{.ErrorMessage}}">ERRO</span>
                        {{end}}
                    </td>
                </tr>
                {{else}}
                <tr>
                    <td colspan="9">Nenhuma alteração registrada ainda.</td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </main>
</body>
</html>
